{"name":"Báo Thức","type":"virtual_device","properties":{"deviceIcon":1889,"currentIcon":"0","log":"","logTemp":"","mainLoop":"","ui.lblBTC.value":"16:10","ui.lblBTS.value":"16:00","ui.lblBTT.value":"16:05","ui.lblTTC.value":"Đã Bật","ui.lblTTS.value":"Đã Bật","ui.lblTTT.value":"Đã Bật","ui.lblWakeUp.value":"16:10","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"Sáng","name":"lblBTS","favourite":false,"main":false}]},{"type":"label","elements":[{"id":2,"lua":false,"waitForResponse":false,"caption":"","name":"lblTTS","favourite":false,"main":false}]},{"type":"button","elements":[{"id":3,"lua":true,"waitForResponse":false,"caption":"ON/OFF","name":"Button50","empty":false,"msg":"local selfId = fibaro:getSelfId();  \nlocal label=\"lblTTS\"\nlocal bien=fibaro:getValue(selfId, \"ui.\"..label..\".value\")\nfibaro:debug(selfId)\nif bien==\"Đã Bật\" then\n -- fibaro:setGlobal(global, \"0\")\n  fibaro:call(selfId,\"setProperty\",\"ui.\"..label..\".value\",\"Đã Tắt\")\n  fibaro:log(\"Đã Tắt\")\nelse\n -- fibaro:setGlobal(global, \"1\")\n  fibaro:call(selfId,\"setProperty\",\"ui.\"..label..\".value\",\"Đã Bật\")\n  fibaro:log(\"Đã Bật\")\nend\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"label","elements":[{"id":4,"lua":false,"waitForResponse":false,"caption":"Trưa","name":"lblBTT","favourite":false,"main":false}]},{"type":"label","elements":[{"id":5,"lua":false,"waitForResponse":false,"caption":"","name":"lblTTT","favourite":false,"main":false}]},{"type":"button","elements":[{"id":6,"lua":true,"waitForResponse":false,"caption":"On/Of Trưa","name":"Button51","empty":false,"msg":"local selfId = fibaro:getSelfId();  \nlocal label=\"lblTTT\"\nlocal bien=fibaro:getValue(selfId, \"ui.\"..label..\".value\")\nfibaro:debug(selfId)\nif bien==\"Đã Bật\" then\n -- fibaro:setGlobal(global, \"0\")\n  fibaro:call(selfId,\"setProperty\",\"ui.\"..label..\".value\",\"Đã Tắt\")\n  fibaro:log(\"Đã Tắt\")\nelse\n -- fibaro:setGlobal(global, \"1\")\n  fibaro:call(selfId,\"setProperty\",\"ui.\"..label..\".value\",\"Đã Bật\")\n  fibaro:log(\"Đã Bật\")\nend\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"label","elements":[{"id":7,"lua":false,"waitForResponse":false,"caption":"Chiều","name":"lblBTC","favourite":false,"main":false}]},{"type":"label","elements":[{"id":8,"lua":false,"waitForResponse":false,"caption":"","name":"lblTTC","favourite":false,"main":false}]},{"type":"button","elements":[{"id":9,"lua":true,"waitForResponse":false,"caption":"On/Off chiều","name":"Button61","empty":false,"msg":"local selfId = fibaro:getSelfId();  \nlocal label=\"lblTTC\"\nlocal bien=fibaro:getValue(selfId, \"ui.\"..label..\".value\")\nfibaro:debug(selfId)\nif bien==\"Đã Bật\" then\n -- fibaro:setGlobal(global, \"0\")\n  fibaro:call(selfId,\"setProperty\",\"ui.\"..label..\".value\",\"Đã Tắt\")\n  fibaro:log(\"Đã Tắt\")\nelse\n -- fibaro:setGlobal(global, \"1\")\n  fibaro:call(selfId,\"setProperty\",\"ui.\"..label..\".value\",\"Đã Bật\")\n  fibaro:log(\"Đã Bật\")\nend\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"label","elements":[{"id":10,"lua":false,"waitForResponse":false,"caption":"Timer Set","name":"lblWakeUp","favourite":false,"main":false}]},{"type":"button","elements":[{"id":11,"lua":true,"waitForResponse":false,"caption":"+Hr","name":"btnHrUp","empty":false,"msg":"--[[\nWakeUp alarm clock\n-------------------------\noriginal by Ucciogenerale\ncontibutions from robmac Alarm for LUAScheduler for HC2 v1.3.1\n-------------------------\n--]]\n\nlocal alarmClockDevice = fibaro:getSelfId()\n\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \n\nif newora == \"\" then newora = \"00:00\" end\n\nlocal H = string.sub(newora, 1, 2) \nlocal M = string.sub(newora, 4, 5) \n\nif tonumber(H) < 23 \nthen \nH = tonumber(H) + 1 \nelse H = 0 \nend \n\nif string.len(H) < 2 \nthen H = string.format(\"%s%s\", '0', H) \nelse \nend \n\nnewora = string.format(\"%s:%s\", H, M) \nfibaro:call(alarmClockDevice, \"setProperty\", \"currentIcon\", 428)\nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblWakeUp.value\", newora)\n","buttonIcon":0,"favourite":false,"main":true},{"id":12,"lua":true,"waitForResponse":false,"caption":"-Hr","name":"btnHrDn","empty":false,"msg":"local alarmClockDevice = fibaro:getSelfId()\n\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \nlocal H = string.sub(newora, 1, 2) \nlocal M = string.sub(newora, 4, 5) \n\nif tonumber(H) > 0 \nthen \nH = tonumber(H) - 1 \nelse H = 23 \nend \n\nif string.len(H) < 2 \nthen H = string.format(\"%s%s\", '0', H) \nelse \nend \n\nnewora = string.format(\"%s:%s\", H, M) \nfibaro:call(alarmClockDevice, \"setProperty\", \"currentIcon\", 428)\nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblWakeUp.value\", newora)","buttonIcon":0,"favourite":false,"main":false},{"id":13,"lua":true,"waitForResponse":false,"caption":"+Min","name":"btnMinUp","empty":false,"msg":"local alarmClockDevice = fibaro:getSelfId()\n\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \nlocal H = string.sub(newora, 1, 2) \nlocal M = string.sub(newora, 4, 5) \n\nif tonumber(M) < 50 \nthen \nM = tonumber(M) + 5 \nelse M = 0 \nend \n\nif string.len(M) < 2 \nthen M = string.format(\"%s%s\", '0', M) \nelse \nend \n\nnewora = string.format(\"%s:%s\", H, M) \n\nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblWakeUp.value\", newora)\n","buttonIcon":0,"favourite":false,"main":false},{"id":14,"lua":true,"waitForResponse":false,"caption":"-Min","name":"btnMinDn","empty":false,"msg":" local alarmClockDevice = fibaro:getSelfId()\n\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \nlocal H = string.sub(newora, 1, 2) \nlocal M = string.sub(newora, 4, 5) \n\nif tonumber(M) > 0 \nthen \nM = tonumber(M) - 5 \nelse M = 50 \nend \n\nif string.len(M) < 2 \nthen M = string.format(\"%s%s\", '0', M) \nelse \nend \n\nnewora = string.format(\"%s:%s\", H, M) \nfibaro:call(alarmClockDevice, \"setProperty\", \"currentIcon\", 428)\nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblWakeUp.value\", newora)","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":15,"lua":true,"waitForResponse":false,"caption":"Set S","name":"Button41","empty":false,"msg":"---------------------------------------\nlocal alarmClockDevice = fibaro:getSelfId()\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblBTS.value\", newora)\n","buttonIcon":0,"favourite":false,"main":false},{"id":16,"lua":true,"waitForResponse":false,"caption":"Set T","name":"Button42","empty":false,"msg":"---------------------------------------\nlocal alarmClockDevice = fibaro:getSelfId()\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblBTT.value\", newora)\n","buttonIcon":0,"favourite":false,"main":false},{"id":17,"lua":true,"waitForResponse":false,"caption":"Set C","name":"Button43","empty":false,"msg":"---------------------------------------\nlocal alarmClockDevice = fibaro:getSelfId()\nlocal newora = fibaro:get(alarmClockDevice,\"ui.lblWakeUp.value\") \nfibaro:call(alarmClockDevice,\"setProperty\",\"ui.lblBTC.value\", newora)\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":18,"lua":true,"waitForResponse":false,"caption":"OFF BT","name":"Button40","empty":false,"msg":"HC2 = Net.FHttp(\"192.168.60.16\", 8080)--IP và Port  XBMC\nresponse = HC2:GET('/jsonrpc?request={\"jsonrpc\":\"2.0\",\"method\":\"Player.Stop\",\"params\":{\"playerid\":0},\"id\":1}')\n---------------------------------------------------------\nlocal ngay_dem=\"Ngay_dem\"\nlocal ngaydem=fibaro:getGlobal(ngay_dem)\nif tonumber(bien)>0 then\n  --buoi toi\n  fibaro:call(460, \"turnOff\")\n  \nelse\n  --buoi sang\n  fibaro:call(460, \"turnOff\")\nend\n\n","buttonIcon":0,"favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}