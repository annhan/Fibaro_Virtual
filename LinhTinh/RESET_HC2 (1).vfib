{"name":"RESET HC2","type":"virtual_device","properties":{"deviceIcon":479,"currentIcon":"479","log":"","logTemp":"","mainLoop":"HC2 = Net.FHttp(\"192.168.1.10\",80) \nHC2:setBasicAuthentication(\"admin\", \"admin\") \nresponse, status, errorCode = HC2:GET(\"/api/diagnostics\")\n\nif errorCode == 0 then \n  local bien=response:match('\"memory\":(.+),\"sto')\n  --fibaro:debug(response)\n  fibaro:debug(\"AA\")\n  fibaro:debug(bien\n    if tonumber(bien)<15 then\n      \t\t--RAM nho hon 15% Reser HC2\n      \t\tHC2 = Net.FHttp(\"192.168.1.10\") \n\t\t\tHC2:setBasicAuthentication(\"admin\", \"admin\") \n\t\t\tresponse, status, errorCode = HC2:POST(\"/api/settings/reboot\", \"data=reset\") \n\n    end\n  local label=\"Label1\" --tên Label hiển thị\n\tlocal selfId = fibaro:getSelfId();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n  \tbien=bien..\"%\"\n\tfibaro:call(selfId, \"setProperty\", \"ui.\"..label..\".value\",bien);\n\telse \n  fibaro:debug(\"error\") \nend ","ui.Label1.value":"64%","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"RAM FREE : ","name":"Label1","favourite":false,"main":true}]},{"type":"button","elements":[{"id":2,"lua":true,"waitForResponse":false,"caption":"RESET","name":"Button11","empty":false,"msg":"HC2 = Net.FHttp(\"192.168.1.10\") \nHC2:setBasicAuthentication(\"admin\", \"admin\") \nresponse, status, errorCode = HC2:POST(\"/api/settings/reboot\", \"data=reset\") \nif errorCode == 0 then \n  fibaro:log(status) \nelse \n  fibaro:log(\"error\") \nend ","buttonIcon":479,"favourite":false,"main":true}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}